
 [專案名稱] PRD：人機對戰水果記憶卡 (優化版)

## 一、專案概述
- **專案名稱**：水果記憶卡對戰
- **一句話描述**：一個 40 張卡牌的 HTML5 記憶翻牌遊戲，玩家與具備模擬人類遺忘特性的 AI 進行輪流對戰。
- **版本**：v2.0 (優化 AI 與規則版)

## 二、問題與目標
### 問題陳述
目前的遊戲版本中，AI 強度過高（幾乎不會忘記），且規則為強制輪流，導致玩家缺乏緊張感與連勝的樂趣。
### 目標
1.  **調整規則**：實施「獎勵回合」機制，配對成功者可繼續行動，增加遊戲節奏的起伏。
2.  **優化 AI**：降低 AI 難度，使其具備「遺忘」特性，貼近人類玩家的記憶曲線，提升遊戲公平性與趣味性。

## 三、目標用戶
### 用戶特徵
- 喜歡休閒腦力遊戲的玩家。
- 希望與電腦對戰但不想面對「無敵 AI」的挫敗感。
### 用戶需求
- 規則簡單易懂。
- 介面乾淨、流暢，支援手機與電腦。
- 遊戲體驗要有「贏」的可能性。

## 四、用戶故事
- **用戶故事 1**：作為一名玩家，我想要在配對成功後能繼續翻牌，以便透過運氣與觀察力獲得連續高分。
- **用戶故事 2**：作為一名玩家，我想要 AI 有時候會忘記剛剛看過的牌，這樣我才有機會透過記憶戰勝它。
- **用戶故事 3**：作為一名玩家，我想要清楚地知道現在輪到誰翻牌，以及遊戲的進度。

## 五、功能需求與驗收標準

### 功能 1：嚴格配對規則與獎勵回合
- **描述**：
    - 每次行動翻開兩張牌。
    - 若圖案相同：該玩家得分 +1，**該玩家繼續進行下一輪翻牌**（不換人）。
    - 若圖案不同：兩張牌蓋回，換對方行動。
- **驗收標準 (Given/When/Then)**：
    - **Given** 遊戲進行中，當前為玩家回合。
    - **When** 玩家翻開兩張相同的卡牌。
    - **Then** 卡牌保持翻開狀態，玩家分數增加，且 UI 顯示「配對成功！請繼續」，玩家仍可點擊其他卡牌。
    - **When** 玩家翻開兩張不同的卡牌。
    - **Then** 卡牌延遲 1 秒後蓋回，分數不變，回合切換至 AI，UI 顯示「AI 思考中...」。

### 功能 2：人性化 AI 記憶系統
- **描述**：
    - AI 會記錄所有被翻開過的牌位置。
    - **記憶衰減**：當 AI 看到一張牌時，只有一定機率（預設 70%）將其存入記憶庫。這意味著有 30% 的機率 AI 雖然看過了，但「沒記住」。
    - **決策邏輯**：
        1.  優先檢查記憶庫中是否有成對的牌，若有則翻出。
        2.  若無成對，則檢查記憶庫中是否有單張已知牌（嘗試去湊對）。
        3.  若完全無記憶，則隨機翻一張未知牌。
- **驗收標準**：
    - **Given** 遊戲進行中，AI 曾經看過一張香蕉卡。
    - **When** 該張香蕉卡被蓋回。
    - **Then** AI 有 30% 的機率在之後的回合中忘記這張牌的位置，隨機翻牌；有 70% 的機率記住並在適當時機翻出。
    - **When** AI 手上有成對資訊。
    - **Then** AI 必定優先翻出該對牌（模擬正常人類看到確定答案會優先選擇）。

### 功能 3：遊戲結算與重置
- **描述**：
    - 當所有 20 對卡牌都被配對完畢，遊戲結束。
    - 彈出 Modal 顯示雙方分數與勝負結果。
    - 提供「再玩一次」按鈕重置整個遊戲狀態（分數、AI 記憶、卡牌排序）。
- **驗收標準**：
    - **Given** 棋盤上所有卡牌皆為 matched 狀態。
    - **When** 最後一對配對動作完成。
    - **Then** 顯示結算畫面，分數計算正確，按鈕可正常重啟遊戲。

## 六、技術約束
### 必須遵守
- 單一 HTML 檔案 (包含 CSS, JS)。
- 不使用 `alert()`，所有訊息需透過 DOM 元素或 Modal 顯示。
- 使用 Semantic HTML5 語義。

### 兼容性要求
- 響應式設計 (RWD)：支援桌面端 (滑鼠點擊) 與移動端 (觸控)。
- 畫布自適應：40 張卡牌在手機上應自動調整網格排版 (例如 8x5 或 5x8)。

### 不要做
- 不要加入音效（除非有特別需求，目前以視覺為主）。
- 不要使用後端資料庫，所有狀態在前端記憶體中處理。

## 七、現有代碼
```html
<!-- 
請在此處貼上目前最新的水果記憶卡 HTML 程式碼 
(包含 HTML 結構, CSS 樣式, 以及目前的 JS 邏輯)
-->
```